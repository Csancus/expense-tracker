<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Expense Tracker">
    <title>Expense Tracker - K√∂lts√©g Nyilv√°ntart√≥</title>
    <meta name="description" content="Smart personal finance management tool - Banksz√°mlakivonat feldolgoz√°s √©s k√∂lts√©gvet√©s k√∂vet√©s">
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="auth.css">
</head>
<body>
    <div class="app">
        <header class="header">
            <div class="header-content">
                <div class="header-top">
                    <div class="header-title">
                        <h1>üí∞ Expense Tracker</h1>
                        <p class="subtitle">Intelligens k√∂lts√©gnyilv√°ntart√≥ √©s csal√°di k√∂lts√©gvet√©s kezel≈ë</p>
                    </div>
                    <button class="theme-toggle" id="themeToggle" title="S√∂t√©t/vil√°gos m√≥d v√°lt√°sa">
                        <span class="theme-icon">üåô</span>
                    </button>
                </div>
            </div>
        </header>

        <nav class="nav">
            <button class="nav-btn active" data-tab="upload">üì§ Felt√∂lt√©s</button>
            <button class="nav-btn" data-tab="transactions">üìã Tranzakci√≥k</button>
            <button class="nav-btn" data-tab="analytics">üìä Elemz√©sek</button>
            <button class="nav-btn" data-tab="settings">‚öôÔ∏è Be√°ll√≠t√°sok</button>
        </nav>

        <main class="main">
            <!-- Upload Section -->
            <section id="upload" class="tab-content active">
                <div class="upload-container">
                    <h2>Banksz√°mlakivonat felt√∂lt√©se</h2>
                    <div class="bank-selector">
                        <h3>V√°lassza ki a bankj√°t:</h3>
                        <div class="bank-grid">
                            <button class="bank-btn" data-bank="otp">
                                <span class="bank-logo">üè¶</span>
                                <span>OTP Bank</span>
                            </button>
                            <button class="bank-btn" data-bank="raiffeisen">
                                <span class="bank-logo">üèõÔ∏è</span>
                                <span>Raiffeisen</span>
                            </button>
                            <button class="bank-btn" data-bank="erste">
                                <span class="bank-logo">üè™</span>
                                <span>Erste</span>
                            </button>
                            <button class="bank-btn" data-bank="revolut">
                                <span class="bank-logo">üí≥</span>
                                <span>Revolut</span>
                            </button>
                        </div>
                    </div>

                    <div class="upload-area" id="uploadArea">
                        <input type="file" id="fileInput" accept=".csv,.pdf,.xlsx,.xls" hidden>
                        <div class="upload-prompt">
                            <span class="upload-icon">üìÅ</span>
                            <h3>H√∫zza ide a f√°jlt vagy kattintson a tall√≥z√°shoz</h3>
                            <p>T√°mogatott form√°tumok: CSV, PDF, Excel</p>
                            <button class="btn btn-primary" onclick="document.getElementById('fileInput').click()">
                                F√°jl kiv√°laszt√°sa
                            </button>
                        </div>
                    </div>

                    <div class="upload-status" id="uploadStatus" style="display: none;">
                        <div class="status-icon">‚úÖ</div>
                        <h3>Sikeres feldolgoz√°s!</h3>
                        <p class="status-details"></p>
                    </div>
                </div>
            </section>

            <!-- Transactions Section -->
            <section id="transactions" class="tab-content">
                <div class="transactions-container">
                    <h2>Tranzakci√≥k</h2>
                    
                    <div class="filters">
                        <div class="filter-row">
                            <input type="text" placeholder="üîç Keres√©s le√≠r√°s vagy keresked≈ë alapj√°n..." class="search-input" id="transactionSearch">
                            <select class="filter-select" id="categoryFilter">
                                <option value="">Minden kateg√≥ria</option>
                            </select>
                        </div>
                        <div class="filter-row">
                            <div class="date-range">
                                <label>Id≈ëszak:</label>
                                <input type="date" class="date-filter" id="startDateFilter" placeholder="Kezd≈ë d√°tum">
                                <span>-</span>
                                <input type="date" class="date-filter" id="endDateFilter" placeholder="Z√°r√≥ d√°tum">
                            </div>
                            <div class="amount-range">
                                <label>√ñsszeg:</label>
                                <input type="number" class="amount-filter" id="minAmount" placeholder="Min √∂sszeg">
                                <span>-</span>
                                <input type="number" class="amount-filter" id="maxAmount" placeholder="Max √∂sszeg">
                            </div>
                        </div>
                        <div class="filter-row">
                            <div class="transaction-type">
                                <label>T√≠pus:</label>
                                <select id="transactionType">
                                    <option value="">Mind</option>
                                    <option value="income">Bev√©tel</option>
                                    <option value="expense">Kiad√°s</option>
                                </select>
                            </div>
                            <div class="filter-actions">
                                <button class="btn btn-primary" id="applyFiltersBtn">Sz≈±r√©s alkalmaz√°sa</button>
                                <button class="btn btn-secondary" id="clearFiltersBtn">Sz≈±r≈ëk t√∂rl√©se</button>
                            </div>
                        </div>
                    </div>

                    <div class="transactions-list" id="transactionsList">
                        <div class="transaction-item">
                            <div class="transaction-date">2024-01-15</div>
                            <div class="transaction-desc">
                                <span class="merchant">Tesco</span>
                                <span class="category">üçî √âlelmiszer</span>
                            </div>
                            <div class="transaction-amount expense">-12,450 Ft</div>
                        </div>
                        <div class="transaction-item">
                            <div class="transaction-date">2024-01-14</div>
                            <div class="transaction-desc">
                                <span class="merchant">MOL</span>
                                <span class="category">üöó K√∂zleked√©s</span>
                            </div>
                            <div class="transaction-amount expense">-8,500 Ft</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Analytics Section -->
            <section id="analytics" class="tab-content">
                <div class="analytics-container">
                    <h2>P√©nz√ºgyi elemz√©sek</h2>
                    
                    <div class="summary-cards">
                        <div class="summary-card">
                            <h3>Havi bev√©tel</h3>
                            <p class="amount income">+450,000 Ft</p>
                        </div>
                        <div class="summary-card">
                            <h3>Havi kiad√°s</h3>
                            <p class="amount expense">-320,000 Ft</p>
                        </div>
                        <div class="summary-card">
                            <h3>Egyenleg</h3>
                            <p class="amount">+130,000 Ft</p>
                        </div>
                    </div>

                    <div class="chart-container">
                        <h3>Kateg√≥ri√°k szerinti megoszl√°s</h3>
                        <canvas id="categoryChart"></canvas>
                    </div>

                    <div class="chart-container">
                        <h3>Havi trend</h3>
                        <canvas id="trendChart"></canvas>
                    </div>
                </div>
            </section>

            <!-- Settings Section -->
            <section id="settings" class="tab-content">
                <div class="settings-container">
                    <h2>Be√°ll√≠t√°sok</h2>
                    
                    <div class="settings-group" id="familyMembersSection">
                        <h3>üë• Csal√°dtagok √©s csoportok</h3>
                        <div id="familyMembersContent">
                            <!-- Current group info -->
                            <div id="currentGroupInfo" class="current-group-info">
                                <div class="group-card">
                                    <h4>Akt√≠v csoport: <span id="currentGroupName">Personal</span></h4>
                                    <p id="currentGroupDescription">Szem√©lyes k√∂lts√©gvet√©s</p>
                                    <div class="group-stats">
                                        <span id="groupMemberCount">1</span> tag
                                    </div>
                                </div>
                                
                                <!-- Group selector -->
                                <div class="group-selector-settings">
                                    <label>V√°lt√°s m√°sik csoportra:</label>
                                    <select id="groupSwitcher" style="width: 100%; padding: 0.5rem; margin-top: 0.5rem; border: 1px solid var(--border-color); border-radius: 4px; background: var(--card-bg); color: var(--text-primary);">
                                        <option value="">Szem√©lyes m√≥d</option>
                                    </select>
                                </div>
                            </div>

                            <!-- Group management actions -->
                            <div class="family-actions">
                                <button class="btn btn-primary" id="createGroupBtn">
                                    ‚ûï √öj csoport l√©trehoz√°sa
                                </button>
                                <button class="btn btn-secondary" id="addFamilyMemberBtn">
                                    üë§ Csal√°dtag hozz√°ad√°sa
                                </button>
                                <button class="btn btn-outline" id="manageGroupsBtn">
                                    ‚öôÔ∏è Csoportok kezel√©se
                                </button>
                            </div>

                            <!-- Current group members -->
                            <div id="currentGroupMembers" class="group-members-list">
                                <h4>Csoporttagok:</h4>
                                <div id="membersList">
                                    <!-- Members will be loaded here -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="settings-group">
                        <h3>üè∑Ô∏è Kateg√≥ri√°k</h3>
                        <div class="category-list">
                            <div class="category-item">
                                <span>üçî</span>
                                <input type="text" value="√âlelmiszer">
                                <button class="btn-delete">‚ùå</button>
                            </div>
                            <div class="category-item">
                                <span>üöó</span>
                                <input type="text" value="K√∂zleked√©s">
                                <button class="btn-delete">‚ùå</button>
                            </div>
                            <div class="category-item">
                                <span>üè†</span>
                                <input type="text" value="Rezsi">
                                <button class="btn-delete">‚ùå</button>
                            </div>
                        </div>
                        <button class="btn btn-secondary">+ Kateg√≥ria hozz√°ad√°sa</button>
                    </div>

                    <div class="settings-group">
                        <h3>üíæ Adatok</h3>
                        <div class="data-actions">
                            <button class="btn btn-primary" id="exportDataBtn">
                                üìä Adatok export√°l√°sa
                            </button>
                            <button class="btn btn-secondary" id="importDataBtn">
                                üì• Adatok import√°l√°sa
                            </button>
                            <button class="btn btn-outline" id="backupDataBtn">
                                üíæ Biztons√°gi ment√©s
                            </button>
                            <button class="btn btn-danger" id="clearAllDataBtn">
                                üóëÔ∏è √ñsszes adat t√∂rl√©se
                            </button>
                        </div>
                        <div class="export-options" id="exportOptions" style="display: none;">
                            <h4>Export be√°ll√≠t√°sok:</h4>
                            <div class="form-group">
                                <label>
                                    <input type="radio" name="exportScope" value="current" checked>
                                    Csak jelenlegi csoport adatai
                                </label>
                            </div>
                            <div class="form-group">
                                <label>
                                    <input type="radio" name="exportScope" value="all">
                                    √ñsszes csoport adatai
                                </label>
                            </div>
                            <div class="form-group">
                                <label>Form√°tum:</label>
                                <select id="exportFormat">
                                    <option value="csv">CSV (Excel compatible)</option>
                                    <option value="json">JSON (teljes adatstrukt√∫ra)</option>
                                    <option value="pdf">PDF jelent√©s</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Id≈ëszak:</label>
                                <select id="exportPeriod">
                                    <option value="all">√ñsszes id≈ë</option>
                                    <option value="year">Ez az √©v</option>
                                    <option value="quarter">Ez a negyed√©v</option>
                                    <option value="month">Ez a h√≥nap</option>
                                    <option value="custom">Egyedi id≈ëszak</option>
                                </select>
                            </div>
                            <div id="customPeriod" style="display: none;">
                                <input type="date" id="startDate" placeholder="Kezd≈ë d√°tum">
                                <input type="date" id="endDate" placeholder="Z√°r√≥ d√°tum">
                            </div>
                            <div class="export-actions">
                                <button class="btn btn-primary" id="downloadExportBtn">
                                    ‚¨áÔ∏è Let√∂lt√©s
                                </button>
                                <button class="btn btn-secondary" onclick="document.getElementById('exportOptions').style.display='none'">
                                    M√©gse
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <footer class="footer">
            <p>¬© 2024 Expense Tracker | Minden adat lok√°lisan t√°rolva | <a href="https://github.com/Csancus/expense-tracker" target="_blank">GitHub</a></p>
        </footer>
    </div>

    <!-- Supabase CDN -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Supabase Configuration -->
    <meta name="SUPABASE_URL" content="https://pdmaznyyartrstliewke.supabase.co">
    <meta name="SUPABASE_ANON_KEY" content="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBkbWF6bnl5YXJ0cnN0bGlld2tlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM0NDUzMDAsImV4cCI6MjA3OTAyMTMwMH0.lRR78pV6NPSZa-pDrqOUPFK7gPBfWb6DqMAZKwNmX-A">
    
    <!-- App Scripts -->
    <script src="pdf-processor.js?v=17"></script>
    <script src="excel-processor.js?v=17"></script>
    <script src="supabase-client.js?v=17"></script>
    <script src="supabase-auth.js?v=17"></script>
    <script src="family-manager.js?v=17"></script>
    <script src="app.js?v=17"></script>
</body>
</html>